Alpha Builder 2.0
=================

This script is used to generate alpha builds from a CVS snapshot using
a makefile system, you will need a few client side tools to generate
the alpha and upload it.

COMPILERS
=========

Microsoft Visual C++ 6.0 is required with at least SP5, this compiler is used
to compile Miranda and all protocols and plugins, except yahoo.

gcc (http://mingw.org) is required to compile yahoo, binutils is also required, 
you can download these from http://mingw.org.

EXTERNAL TOOLS
==============

wget.exe >= 1.8.2 (src: WackGet)

	You can obtain this from sources, or get WackGet (Win32 UI front end)
	and copy wget.exe from there.
	
	wget is used to download the source tree.

abmake.exe >= 3.80

	This is GNU make renamed not to interfere with any installation of "Make"
	that might be installed. You can get this from http://www.mingw.org

sftp.exe >= ? (OpenSSH Cygwin implementation)

	Sadly PuTTY's implementation of sftp doesn't include the ability to
	setup symlinks via sftp, so OpenSSH's sftp has to be used.
	
unzip.exe >= 5.51 (InfoZip's unzip)

	Is used to extract the zip file that is downloaded, it contains the source tree.

zip.exe >= 2.3 (InfoZip's zip)

	Is used to generate zip of the compiled binaries.
	
All these binaries should go in a directory called 'Bin'.
	
OTHER FILES
===========

The files within the dir of 'server' are python scripts that are run on the server
which generates the CVS archive, they do not need to be run on the client but are
kept for general reference.
	
	
HOW IT WORKS
============

go.bat will invoke make with all.mk, this makefile will:

1. create tmp dirs
2. download the source tree
3. download the changelog
4. extract the zip file into a temp dir
5. call build.mk, this will compile everything using msdev and or mingw
6. call package.mk this will generate zip files, with build dates.
7. generate commands for sftp to issue, since filenames are unique
8. connect sftp and wait for a password, then follow the batch file

KNOWN ISSUES
============

1. the CVS source code is usually ten minutes behind any CVS commits
2. the CVS checkout server accesses the CVS via ssh using a private key uploaded
for the user 'miranda_ab' this user has a passphased private key but remains loaded
via KeyChain, it is therefore possible for a server compromise to allow SSH access to the
CVS - but 'miranda_ab' is limited to read only access via cvs_acls but this is still
a problem.
3. pushing msvc to do multiple compiles at once is unstable, more than six at any given time
seems to crash the compiler :(
